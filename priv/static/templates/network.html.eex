<html>

<head>
  <title> Configure Farmbot's Network </title>
  <link rel="stylesheet" href="/styles.css">
</head>

<body>
  <h1>Configure your FarmBot</h1>
  <div class="widget">
    <div class="widget-header">
      <h5>Network</h5>
    </div>
    <div class="widget-content">
      <form action="configure_network" method="post">
        <%= for {interface, settings} <- interfaces do
        case settings do
          %{type: :wired} ->
            """
            <fieldset>
              <label>Enable Ethernet ( #{interface} )</label>
              <input type=checkbox name=#{interface}_enable>
              <input hidden=true name=#{interface}_type value=wired>
            </fieldset>
            """
          %{type: :wireless, ssids: ssids} ->
            """
            <fieldset>
              <label>Enable Wireless ( #{interface} )</label>
              <input type=checkbox name=#{interface}_enable>
              <label>Network Name/SSID</label>
              <select name=#{interface}_ssid>
                #{Enum.reduce(ssids, "", fn(ssid, acc) ->
                  acc <> "<option value=#{ssid}> #{ssid} </option>"
                end)}
              </select>
              <label>Password</label>
              <input type=password name=#{interface}_psk>
              <input hidden=true name=#{interface}_type value=wireless>
            </fieldset>
            """
        end
      end %>
    </div>
  </div>
  <div class="button">
    <input type=submit value="next">
  </div>
  </form>

  </boty>

</html>
